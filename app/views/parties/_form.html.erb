<%= simple_form_for(@party) do |f| %>

  <% if @party.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@party.errors.count, "error") %> prohibited this member from being saved:</h2>
      <ul>
      <% @party.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  
  <%= field_set_tag do %>
    <% if @party.persisted? %>
      <%= f.input :uuid, :label => 'UUID', :readonly => true, :hint => 'Auto-generated UUID, not changeable!' %>
    <% end %>
    <%= f.input :name %>
    <%= f.input :code %>
    <%= f.input :founded_in %>
    <%= f.input :disbanded_in %>

    <%= f.simple_fields_for :coalitionships do |co| %>
      <%= co.input :coalition_uuid, :collection => Coalition.all, :selected => (@party.coalition.try(:uuid) if @party.persisted?), :prompt => "Select coalition", :label => 'Coalition'%>

      <%= co.input :joined_at, :collection => 1970..Time.now.year %>

      <%= co.input :party_uuid, :value => @party.uuid, as: :hidden %>
    <% end %>

    
  <% end %>
  <ul class="actions">
    <li><%= f.submit %></li>
  </ul>

<% end %>
